<div class="flex items-center gap-4 mb-6 hidden">
    <button class="w-10 h-10 rounded-xl bg-white dark:bg-card border border-ring-light dark:border-ring grid place-items-center" data-page="home2.html">
      <span class="text-xl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12.6 12L8 7.4L9.4 6l6 6l-6 6L8 16.6z"/></svg></span>
    </button>
    <h1 class="text-2xl md:text-3xl font-extrabold">ویرایش پروفایل</h1>
  </div>
<div class="bg-white dark:bg-card rounded-3xl p-4 shadow-xl border border-gray-200 dark:border-ring my-4 ml-4">
    <div class="text-center mb-8 flex flex-col items-center">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 relative pb-2">
            تصویر پروفایل
            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-brand to-brand-2 rounded-full"></div>
        </h2>
    
        <div class="relative mb-4">
            <img id="profileImage" src="assets/imgs/profile.jpg" alt="پروفایل" 
                 class="w-32 h-32 rounded-full border-4 border-white dark:border-gray-700 shadow-xl">
            <div class="absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer" 
                 data-trigger-file-input="imageInput">
                <i class="fas fa-camera text-white text-2xl"></i>
            </div>
        </div>
    
        <input type="file" id="imageInput" accept="image/*" class="hidden" data-image-upload="true">
    
        <button type="button" data-trigger-file-input="imageInput" 
                class="text-brand font-medium hover:text-brand/80 transition-colors flex items-center gap-2">
            <i class="fas fa-edit"></i>
            تغییر عکس پروفایل
        </button>
    </div>

    <form id="profileForm" class="space-y-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 relative pb-2">
            اطلاعات شخصی
            <div class="absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-brand to-brand-2 rounded-full"></div>
        </h2>

        <div class="mb-6">
            <label for="fullName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                <i class="fas fa-user ml-2"></i>
                نام کامل
            </label>
            <input type="text" id="fullName" class="w-full px-4 py-2 border-2 border-gray-200 dark:border-ring rounded-2xl bg-white dark:bg-card text-md transition-all focus:border-brand focus:ring-4 focus:ring-brand/10 outline-none" value="میثم هاشمی" required>
        </div>

        <div class="mb-6">
            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                <i class="fas fa-envelope ml-2"></i>
                ایمیل
            </label>
            <input type="email" id="email" class="w-full px-4 py-2 border-2 border-gray-200 dark:border-ring rounded-2xl bg-white dark:bg-card text-md transition-all focus:border-brand focus:ring-4 focus:ring-brand/10 outline-none" value="meysam@example.com" required>
        </div>

        <div class="mb-6">
            <label for="phone" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                <i class="fas fa-phone ml-2"></i>
                شماره تلفن
            </label>
            <input type="tel" id="phone" class="w-full px-4 py-2 border-2 border-gray-200 dark:border-ring rounded-2xl bg-white dark:bg-card text-md transition-all focus:border-brand focus:ring-4 focus:ring-brand/10 outline-none" value="09123456789" required>
        </div>

        <div class="mb-6">
            <label for="birthDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                <i class="fas fa-calendar ml-2"></i>
                تاریخ تولد (YYYY/MM/DD)
            </label>
            <input type="text" id="birthDate" class="w-full px-4 py-2 border-2 border-gray-200 dark:border-ring rounded-2xl bg-white dark:bg-card text-md transition-all focus:border-brand focus:ring-4 focus:ring-brand/10 outline-none" placeholder="1370/01/01" pattern="[0-9]{4}/[0-9]{2}/[0-9]{2}">
        </div>

        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
                <i class="fas fa-venus-mars ml-2"></i>
                جنسیت
            </label>
            <div class="flex gap-4">
                <label class="flex items-center justify-center flex-1 p-3 border-2 border-gray-200 dark:border-ring rounded-xl cursor-pointer transition-all hover:border-brand hover:bg-brand/5 bg-brand/10 border-brand text-brand" data-select-gender="male">
                    <input type="radio" name="gender" value="male" checked class="hidden">
                    <i class="fas fa-mars ml-2"></i>
                    <span>آقا</span>
                </label>
                <label class="flex items-center justify-center flex-1 p-3 border-2 border-gray-200 dark:border-ring rounded-xl cursor-pointer transition-all hover:border-brand hover:bg-brand/5" data-select-gender="female">
                    <input type="radio" name="gender" value="female" class="hidden">
                    <i class="fas fa-venus ml-2"></i>
                    <span>خانم</span>
                </label>
            </div>
        </div>

        <div class="mb-6">
            <label for="bio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                <i class="fas fa-user-edit ml-2"></i>
                درباره من
            </label>
            <textarea id="bio" class="w-full px-4 py-2 border-2 border-gray-200 dark:border-ring rounded-2xl bg-white dark:bg-card text-md transition-all focus:border-brand focus:ring-4 focus:ring-brand/10 outline-none resize-vertical min-h-[120px]" rows="4" placeholder="چند خط درباره خودتان بنویسید...">برنامه‌نویس و طراح رابط کاربری با 12 سال تجربه در زمینه توسعه وب و اپلیکیشن‌های موبایل.</textarea>
        </div>

        <button type="submit" class="w-full bg-gradient-to-r from-brand to-brand-2 text-white font-bold py-3 px-8 rounded-2xl hover:shadow-lg hover:shadow-brand/30 transition-all hover:-translate-y-1 active:translate-y-0">
            <i class="fas fa-save ml-2"></i>
            ذخیره تغییرات
        </button>
    </form>
</div>

<div id="successMessage" class="hidden fixed top-20 right-4 bg-green-500 text-white px-4 py-3 rounded-xl font-bold shadow-lg z-50 flex items-center gap-2">
    <i class="fas fa-check-circle"></i>
    <span>تغییرات با موفقیت ذخیره شد!</span>
</div>

<div id="errorMessage" class="hidden fixed top-20 right-4 bg-red-500 text-white px-4 py-3 rounded-xl font-bold shadow-lg z-50 flex items-center gap-2">
    <i class="fas fa-exclamation-circle"></i>
    <span>خطا در ذخیره تغییرات. لطفاً دوباره تلاش کنید.</span>
</div>

<script>
document.getElementById('birthDate').addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
    
    if (value.length >= 4) {
        value = value.substring(0, 4) + '/' + value.substring(4);
    }
    if (value.length >= 7) {
        value = value.substring(0, 7) + '/' + value.substring(7, 9);
    }
    
    e.target.value = value;
});

function handleImageUpload(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('profileImage').src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
}

function selectGender(element, value) {
    document.querySelectorAll('label[onclick*="selectGender"]').forEach(item => {
        item.classList.remove('bg-brand/10', 'border-brand', 'text-brand');
        item.classList.add('border-gray-200', 'dark:border-ring');
    });
    element.classList.remove('border-gray-200', 'dark:border-ring');
    element.classList.add('bg-brand/10', 'border-brand', 'text-brand');
    element.querySelector('input[type="radio"]').checked = true;
}

document.getElementById('profileForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin ml-2"></i>در حال ذخیره...';
    submitBtn.disabled = true;
    setTimeout(() => {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
        const successMsg = document.getElementById('successMessage');
        successMsg.classList.remove('hidden');
        setTimeout(() => {
            successMsg.classList.add('hidden');
        }, 3000);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }, 2000);
});
</script>